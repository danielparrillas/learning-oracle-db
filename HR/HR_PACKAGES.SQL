-- Package especification (espec o cabecera) for HR_PROCEDURES
CREATE OR REPLACE PACKAGE HR_PROCEDURES IS
    PROCEDURE AJUSTE_SALARIAL(
        I_ID IN EMPLOYEES.EMPLOYEE_ID%TYPE,
        I_PORCENTAJE IN FLOAT
    );

    PROCEDURE OBTENER_DATOS_EMPLEADO(
        I_ID IN EMPLOYEES.EMPLOYEE_ID%TYPE,
        O_FIRST_NAME OUT EMPLOYEES.FIRST_NAME%TYPE,
        O_LAST_NAME OUT EMPLOYEES.LAST_NAME%TYPE,
        O_EMAIL OUT EMPLOYEES.EMAIL%TYPE
    );
END HR_PROCEDURES;

-- Package body for HR_PROCEDURES

CREATE OR REPLACE PACKAGE BODY HR_PROCEDURES IS

    PROCEDURE AJUSTE_SALARIAL(
    I_ID IN EMPLOYEES.EMPLOYEE_ID%TYPE,
    I_PORCENTAJE IN FLOAT
    )
    IS
    BEGIN
        UPDATE EMPLOYEES SET SALARY = SALARY * (1 + I_PORCENTAJE)
        WHERE EMPLOYEE_ID = I_ID;
    END AJUSTE_SALARIAL;

    PROCEDURE OBTENER_DATOS_EMPLEADO(
    I_ID IN EMPLOYEES.EMPLOYEE_ID%TYPE,
    O_FIRST_NAME OUT EMPLOYEES.FIRST_NAME%TYPE,
    O_LAST_NAME OUT EMPLOYEES.LAST_NAME%TYPE,
    O_EMAIL OUT EMPLOYEES.EMAIL%TYPE
    )
    IS
    BEGIN
        SELECT FIRST_NAME, LAST_NAME, EMAIL
        INTO O_FIRST_NAME, O_LAST_NAME, O_EMAIL
        FROM EMPLOYEES
        WHERE EMPLOYEE_ID = I_ID;
    END OBTENER_DATOS_EMPLEADO;

END HR_PROCEDURES;


-- Test the AJUSTE_SALARIAL procedure
DECLARE
		v_employee_id EMPLOYEES.EMPLOYEE_ID%TYPE := 100;
		v_percentage FLOAT := 0.10; -- 10% increase
BEGIN
		HR_PROCEDURES.AJUSTE_SALARIAL(
			I_ID => v_employee_id,
			I_PORCENTAJE => v_percentage
		);
		DBMS_OUTPUT.PUT_LINE('Salary adjusted for employee ID: ' || v_employee_id);
END;

-- Test the OBTENER_DATOS_EMPLEADO procedure
DECLARE
    v_first_name EMPLOYEES.FIRST_NAME%TYPE;
    v_last_name EMPLOYEES.LAST_NAME%TYPE;
    v_email EMPLOYEES.EMAIL%TYPE;
BEGIN
    HR_PROCEDURES.OBTENER_DATOS_EMPLEADO(
        I_ID => 100,
        O_FIRST_NAME => v_first_name,
        O_LAST_NAME => v_last_name,
        O_EMAIL => v_email
    );

    DBMS_OUTPUT.PUT_LINE('Nombre: ' || v_first_name);
    DBMS_OUTPUT.PUT_LINE('Apellido: ' || v_last_name);
    DBMS_OUTPUT.PUT_LINE('Email: ' || v_email);
END;