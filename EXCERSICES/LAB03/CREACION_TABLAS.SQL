CREATE TABLE MEDICO (
	IDMEDICO VARCHAR2(5) NOT NULL,
	NOMBREMEDICO VARCHAR2(50) NOT NULL,
	APELLIDOMEDICO VARCHAR2(50) NOT NULL,
	ESPECIALIDADMEDICO VARCHAR2(50) NOT NULL,
	COLEGIATURAMEDICO VARCHAR2(12) NOT NULL
);

CREATE TABLE PACIENTE (
	IDPACIENTE VARCHAR2(5) NOT NULL,
	NOMBREPACIENTE VARCHAR2(50) NOT NULL,
	APELLICOPACIENTE VARCHAR2(50) NOT NULL,
	FECHANACIMIENTO DATE NOT NULL,
	TELEFONOPACIENTE VARCHAR2(10) NOT NULL
);

CREATE TABLE RECETA (
	NUMERORECETA INT NOT NULL,
	FECHARECETA DATE NOT NULL,
	IDPACIENTE VARCHAR2(5) NOT NULL,
	IDMEDICO VARCHAR2(5) NOT NULL
);

CREATE TABLE DETALLERECETA (
	NUMERORECETA INT NOT NULL,
	CODIGOMEDICINA VARCHAR2(5) NOT NULL,
	CANTIDAD INT NOT NULL,
	DOSIS VARCHAR2(50) NOT NULL,
	INDICACIONES VARCHAR2(100)
);

-- MODIFICACIONES PARA MÉDICO
ALTER TABLE MEDICO
ADD CONSTRAINT MEDICOPK PRIMARY KEY (IDMEDICO);

ALTER TABLE MEDICO
ADD CONSTRAINT MEDICOUK UNIQUE (NOMBREMEDICO, APELLIDOMEDICO);

ALTER TABLE MEDICO
ADD CONSTRAINT MEDICOCK CHECK (ESPECIALIDADMEDICO IN ('Pediatría', 'Ginecología', 'Cardiología'));

-- MODIFICACIONES PARA PACIENTE
ALTER TABLE PACIENTE
ADD CONSTRAINT PACIENTEPK PRIMARY KEY (IDPACIENTE);

ALTER TABLE PACIENTE
ADD CONSTRAINT PACIENTE_FECHANACIMIENTO_CK CHECK (FECHANACIMIENTO >= TO_DATE('1950-01-01', 'YYYY-MM-DD'));

-- MODIFICACIONES PARA RECETA
ALTER TABLE RECETA
ADD CONSTRAINT RECETAPK PRIMARY KEY (NUMERORECETA);

ALTER TABLE RECETA
MODIFY FECHARECETA DEFAULT SYSDATE;

ALTER TABLE RECETA
ADD CONSTRAINT RECETAPACIENTEFK FOREIGN KEY (IDPACIENTE)
REFERENCES PACIENTE (IDPACIENTE);

ALTER TABLE RECETA
ADD CONSTRAINT RECETAMEDICOFK FOREIGN KEY (IDMEDICO)
REFERENCES MEDICO (IDMEDICO);

-- MODIFICACIONES PARA DETALLERECETA
ALTER TABLE DETALLERECETA
ADD CONSTRAINT DETALLERECETAPK PRIMARY KEY (NUMERORECETA, CODIGOMEDICINA);

ALTER TABLE DETALLERECETA
ADD CONSTRAINT DETALLERECETACK CHECK (CANTIDAD > 0);

ALTER TABLE DETALLERECETA
ADD CONSTRAINT DETALLERECETAFK FOREIGN KEY (NUMERORECETA)
REFERENCES RECETA (NUMERORECETA);


